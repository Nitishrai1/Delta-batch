<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=\, initial-scale=1.0">
    <title>Promises</title>
</head>
<body>


    <script>
        // function savetoDb(data,success,failure){
        //     let internetspeed=Math.floor(Math.random()*10)+1;
        //     if(internetspeed>4){
        //         success();

        //     }
        //     else {
        //         console.log(`was not saved`);
        //         failure();
        //     }
        // }
        // savetoDb("Nitish rai ",()=>{
        //     console.log("your data was saved: ");
        //     savetoDb("Rohan yadav",()=>{
        //         console.log("success2: data saved"),()=>{console.log("data was not saved: Weak connection")}})
        // },()=>{
        //     console.log("Weak connecetion, data not saved");
        // });


        // in the above code the function are interdependent on each other which is called the asynchronus nature of js to avoid this interdependenceise we use promises
        // Promis: it is a object which have to part resove for success and reject: which is for failure

        function savetoDb(data){
            return new Promise((resolve,reject)=>{
            let internetspeed=Math.floor(Math.random()*10)+1;
            if(internetspeed>4){
                resolve();
                console.log("data was saved ");

            }
            else{
                reject();
                console.log("Weak: connection");
            }

            });
        }
        // savetoDb("nitish rai");
        // then(): if the request is fullfiled then the then mathod can be used if not then the catach mathed can be used catch()

        // let request=savetoDb("nitish rai");    //req is the promis object
        // request.then(()=>{
        //     console.log("Promise was resolved");
        //     console.log(request);
        // })
        // .catch(()=>{
        //     console.log("Promis was rejected");
        //     console.log(request);

        // })


        // Promis chaining it is a method used in place where the  one task is resolved then the another task is sent
        savetoDb("apna college")
        .them(()=>{
            console.log("data1 saved, promise was resolved.");
            // savetoDb("Hello world")   //sending another promise
            // .then(()=>{
            //     console.log("data2 saved");
            // })
            return savetoDb("hello world");
        }) 
        .then(()=>{
            console.log("data2 saved");
            return savetoDb("nitish rai");
        })
        .then(()=>{
            console.log("data3 saved");
        })
        .catch(()=>{
            console.log("promise was rejected");
        });
    </script>
    
</body>
</html>